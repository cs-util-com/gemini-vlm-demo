<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AEC Vision Demo — Gemini 2.5 (REST, client-only)</title>
<style>
  :root { color-scheme: dark; }
  body { margin: 0; font-family: system-ui, sans-serif; background:#0b0b10; color:#e8e8ef; }
  header { padding: 16px 20px; border-bottom: 1px solid #232332; display:flex; gap:12px; align-items:center; flex-wrap:wrap;}
  header input, header select, header button { background:#141420; color:#e8e8ef; border:1px solid #2a2a3b; border-radius:8px; padding:10px 12px; }
  header input[type="password"] { width: 320px; }
  label small.hint-inline { display:block; margin-top:6px; color:#9aa0b4; }
  label small.hint-inline a { color:#9aa0b4; text-decoration:underline; }
  label small.hint-inline a:hover { color:#cfd5e4; }
  #dropzone { margin: 16px 20px; border: 2px dashed #303049; border-radius: 12px; padding: 20px; text-align: center; background:#11111a; }
  #dropzone.drag { background:#161628; border-color:#4a4aff; }
  #canvasWrap { margin: 16px 20px; overflow:auto; }
  #canvas { max-width: 100%; display:block; }
  #jsonOut { margin: 16px 20px 80px; background:#0f0f18; padding: 16px; border-radius: 12px; border:1px solid #1e1e2e; white-space: pre-wrap; word-break: break-word; }
  small.hint { color:#9aa0b4; }
  .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
  .spacer { flex:1; }
</style>
</head>
<body>
<header>
  <div class="row">
    <label>Gemini API Key:
      <input id="apiKey" type="password" placeholder="Paste key (stored locally in this browser)" />
      <small class="hint hint-inline">Get your key from <a href="https://aistudio.google.com/app/api-keys" target="_blank" rel="noreferrer noopener">Google AI Studio</a>. The key is stored only in your browser.</small>
    </label>
    <label>Model:
      <select id="model">
        <option>gemini-2.5-pro</option>
        <option>gemini-2.5-flash</option>
        <option>gemini-2.5-flash-lite</option>
      </select>
    </label>
    <button id="pickBtn">Choose image…</button>
    <button id="runBtn">Analyze</button>
  </div>
  <div class="spacer"></div>
  <small class="hint">Prototype only: key lives in this page session, never sent anywhere except Google’s API.</small>
</header>

<div id="dropzone">
  <input id="file" type="file" accept="image/*" hidden />
  <p><b>Drop an image here</b> or click “Choose image…”. Then press “Analyze”.</p>
  <p class="hint">Draws bounding boxes/polygons and lists full JSON below (objects, facility assets, safety, progress).</p>
</div>

<div id="canvasWrap"><canvas id="canvas"></canvas></div>
<pre id="jsonOut"></pre>

<script type="module" src="./src/index.js"></script>
</body>
</html>